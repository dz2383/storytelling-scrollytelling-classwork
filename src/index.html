<!doctype html>
<html lang='en'>
  <head>
      <meta charset="utf-8">
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

        <style>
          .container {
            /*max-width: 60rem;*/
          }

          .sticky {
            position: -webkit-sticky;
            position: sticky;
            top: 0;
          }

          h1 {
            text-align: center;
          }

          #chart-4 .y-axis path {
            display: none;
          }

          #chart-4 .axis text {
            fill: #999;
          }

          #chart-4 .axis line
           {
            stroke: #999;
            stroke-width: 0.5px;
          }

          #chart-4 .axis .domain {
            stroke: #999;
            stroke-width: 0.5px;
          }

          #chart-4 .axis {
            font-size: 12px;
          }

          p small {
            background: #fff880;
          }

          .colored-text {
            padding: 1px 7px;
            display: inline-block;
          }
        </style>
        <style>
          /* Highlight steps when you scroll into them */
          /* You can delete this one! */
/*          .step.entered {
            -webkit-transform-style: preserve-3d;
            -moz-transform-style: preserve-3d;
            transform-style: preserve-3d;
            -webkit-transition: 1.5s background;
            -moz-transition: 1.5s background;
            transition: 1.5s background;
            background: #fff888;
          }*/

          /* Set the sticky things 2% from the top */
          .sticky {
            top: 0vh;
            align-self: flex-start;  
          }

          /* Minimum height of 70% of the screen */
          .step {
            min-height: 75vh;
          }

          .step > p {
            background: rgba(255,255,255,0.9);
            padding: 10px 0;
            margin-bottom: 0;
            padding-bottom: 1rem;
          }
        </style>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-sm-12 mt-5 mb-5">
          <h1>✨✨ S C R O L L Y T E L L I N G ✨✨</h1>
        </div>
      </div>






      <div class="row mt-5 mb-5">
        <div class="col-sm-12">
            <h2>Here’s what the stark gender disparity among top orchestra musicians looks like</h2>
            <p>We're stealing <a href="https://qz.com/work/1393078/orchestras/" target="_new">this piece</a> from Quartz. It isn't scrollytelling, but we can make it happen.</p>
        </div>
        <div class="col-lg-8 sticky">
          <div id="chart-1"></div>
        </div>
        <div class="col-lg-4">
          <div class='step' id="blank-graph">
            <p>This fall, the world’s great symphony orchestras will open their 2018-19 seasons. And just as they have for decades, many of them will be sharply segregated by gender.</p>
          </div>
          <div class='step' id="intro-graph">
            <p>It's all dudes, it's no women</p>
          </div>
          <div class='step' id='instruments-mentioned'>
            <p>Of the 2,438 full-time musicians we looked at, 1,677 (69%) were men. But in many instruments, men were even more disproportionately represented. 
              <span class="majority-male colored-text">Bassoon</span> (86% male), 
              <span class="majority-male colored-text">double bass</span> (95%), and 
              <span class="majority-male colored-text">timpani</span> (96%) players are predominately men. Just one of the 103 trumpet players in the 22 orchestras is a woman, and there are no women among the 99 trombonists and 26 tuba players. Only the harp, which is 94% female, is as skewed in the other direction.</p>
          </div>
          <div class='step'
            <p>Men will again make up the majority of brass, woodwinds, and percussion players, and most harpists will again be women.</p>
            <p>Quartz at Work examined the instruments played by the musicians of the world’s 20 greatest orchestras, as ranked by the UK’s Gramophone magazine, to understand how gender shapes their composition. The results are stark.</p>
            <p>The clustering of instruments by gender reflects prejudices that date back to the 19th century, or earlier. Women were discouraged from playing instruments that might distort their facial features (ie., flutes and horns), as well as instruments that required supposedly unladylike postures (like cellos, which are held between the knees), or that were heavy or powerful, says Amy Phelps, a cello instructor who wrote her PhD dissertation about gender discrimination in orchestras.</p>
            <p>"The instruments they identified as male are the louder, bigger instruments," she tells Quartz at Work. "Our society does not want women to be loud."</p>
            <p>There are other reasons for the disparity, rooted in tradition and history. Brass instruments, for example, have a long association with military and industrial bands, particularly in Europe. Those worlds explicitly excluded women.</p>
            <p>Jesse Rosen, the president of the League of American Orchestras, says that he and his fellow trombone students in the 1970s "had no use of women playing trumpet or trombone."</p>
            <p>"We thought low brass was the pinnacle of masculinity," Rosen said. "We thought brass had to be loud and strong, and I doubt we were unique."</p>


          </div>
        </div>
      </div>






      <div class="row mt-5">
        <div class="col-sm-12">
          <h2>Making lines get drawn</h2>
          <p>To have a line be drawn, it's pretty easy. You trick the <code>stroke-dasharray</code> property into having very short dash with a verrrrry long space, and eventually make the dash longer and longer until you have your line.</p>
          <p>Every single time your code will have a function that looks like this:</p>
          <pre>function tweenDash() {
  var l = this.getTotalLength()

  var i = d3.interpolateString('0,' + l, l + ',' + l)
  return function(t) {
    return i(t)
  }
}</pre>
          <p>And you'll use it like this:
          <pre>svg.select('path').transition().attrTween('stroke-dasharray', tweenDash)</pre>
          <p>Just like a normal transition!</p>
        </div>
      </div>
      <div class="row mt-5">
        <div class="col-lg-8 sticky order-lg-2">
          <div id="chart-2"></div>
        </div>
        <div class="col-lg-4">
          <div class='step'>
            <h2>A nice long railroad</h2>
            <p>Let's make an interactive version of <a href="https://www.businessinsider.com/the-longest-railway-in-the-world-2015-1">this Washington Post/Business Insider map</a>.</p>
          </div>
          <div class='step' id="moscow-beijing">
            <p>The <strong class='moscow-beijing-text colored-text'>Moscow-to-Beijing Train</strong> has a route that is 4,340 miles long, which makes it the third largest in the world.</p>
          </div>
          <div class='step' id="trans-siberian">
            <p>The <strong class='trans-siberian-text colored-text'>Trans-Siberian Railway</strong> is 5,772 miles long, and is the second-largest in the world.</p>
          </div>
          <div class='step' id="china-europe">
            <p>Completed in 2015, the <strong class='block-train-text colored-text'>China-Europe Block Train</strong> is over 8,000 miles long, making it the longest train route in the world. It travels from Yiwu, China, to Madrid, Spain.</p>
          </div>
        </div>
      </div>










      <div class="row mt-5">
        <div class="col-sm-12">
          <h2>Making maps transition</h2>
          <p>When you need to do something crazy, like move a map around, you use a <strong>custom interpolator</strong> with <code>d3.tween</code>.</p>
          <p>In this case, we're rotating the globe with something like this:</p>
          <pre>d3.transition()
  .duration(1000)
  .tween('rotate', () => { 
    let target = [74, -40]
    let rotationInterpolator = d3.interpolate(projection.rotate(), target) 
    return function(t) {
      projection.rotate(rotationInterpolator(t))
      svg.selectAll('.country').attr('d', path)
      svg.selectAll('.sphere').attr('d', path)
    }
  })
</pre>
        <ol>
          <li>We start a transition, and tell d3 we're going to change something. We have to give our change a name, so we call it <code>'rotate'</code>.</li>
          <li>We pick the coordinates to rotate to - NYC!</li>
          <li>Our interpolator begins from our current rotation - <code>projection.rotate()</code> - and go to our target rotation, <code>target</code>. Think of it like a scale!</li>
          <li>The <code>function(t)</code> part gets called again and again while the transition is happening. As the transition progresses, <code>t</code> moves from <code>0</code> to <code>1</code>.
          <li>Like I said, it works like a scale - <code>rotationInterpolator(0)</code> would give us our start rotation, <code>rotationInterpolator(1)</code> would give us our end rotation, and <code>rotationInterpolator(0.5)</code> would give us halfway in between.</li>
          <li>After stopping by a ton of in-between points - <code>0</code>, <code>0.05</code>, <code>0.13</code>, <code>0.22</code>, etc - the tween eventually gets to <code>1</code>, and the transition finishes!</li>
        </ol>
        </div>
        <div class="col-lg-8 sticky">
          <div id="chart-3"></div>
        </div>
        <div class="col-lg-4">
          <div class='step'>
            <h2>Time for a world tour!</h2>
            <p>We're going to look at a map</p>
          </div>
          <div class='step' id="step-nyc">
            <p>Let's go see <strong>New York City</strong></p>
          </div>
          <div class='step' id="step-sf">
            <p>Let's zoom in to <strong>San Francisco</strong></p>
          </div>
          <div class='step' id="step-shanghai">
            <p>Let's zoom out and head over to <strong>Shanghai</strong></p>
          </div>
        </div>
      </div>
    





      <div class="row">
        <div class="col-lg-12 mb-5">
          <h2>Some Fancy Graphic About Basketball</h2>
          <p>We are going to be reproducing <a href="https://www.nytimes.com/interactive/2017/05/25/sports/basketball/lebron-career-playoff-points-record.html" target="_new">this New York Times visualization</a>.</p>
          <p>Each one of your <code>datapoints</code> is a game. Each game has the following columns:</p>
          <ul>
            <li><code>year</code>: the year a game was played in</li>
            <li><code>name</code>: the player's name</li>
            <li><code>pts</code>: the points scored in that game</li>
            <li><code>cumulativePoints</code> the total career points scored by that player up until that game</li>
            <li><code>cumulativeLastTwoRoundsPoints</code>: the total career points scored by that player up until that game <em>only counting points in the last 2 rounds of the playoffs</em></li>
            <li><code>index</code>: the number of the game in that player's career (first game is 0, 20th game is 19, etc)</li>
          </ul>
          <p>For example, <strong>a single datapoint</strong> might tell you: in a game in 2002 Steve Nash scored 25 points. He had scored 226 in his career so far, but 0 in the final 2 rounds of the playoffs. It was the 21st game of his career.</p>
          <p>They've been nested based on the player name.</p>
          <p>The scales and such you have are the usual things: <code>colorScale</code>, <code>xPositionScale</code>, <code>yPositionScale</code>, <code>line</code> (the line generator), <code>xAxis</code>, <code>yAxis</code>.</li>
        </div>
        <div class="col-lg-8 sticky order-lg-2">
          <div id="chart-4"></div>
        </div>
        <div class="col-lg-4">
          <div class='step' id="step-finals">
            <h2>LeBron James passes Michael Jodan</h2>
            <p>With 35 points against the Celtics on Thursday night, <span class="colored-text">LeBron James</span> now has the most <strong>career playoff points</strong>. He passed <span class="colored-text">Michael Jordan</span>, who held the record since 1998.</p>
            <p>Here are the top 50 scorers in N.B.A. playoff history</p>
            <p><small>This is step 1 in the NYT visualization</small></p>
          </div>
          <div class='step' id="step-last-two-rounds">
            <p>Historically players scored most of their <strong>playoff points in the finals and conference finals</strong>. There were fewer games in earlier rounds of the playoffs and fewer teams in the league, so players like <span class="colored-text">Jerry West</span> regularly played in the finals. After seven trips to the finals, <span class="colored-text">James</span> has scored more points in the last two rounds of the playoffs than any player since Jordan.</p>
            <p><small>This is step 2 in the NYT visualization</small></p>
          </div>
          <div class='step' id="step-points-by-game">
            <p>Looking at <strong>points scored in each playoff game</strong>, <span class="colored-text">James</span> has averaged 28 points. A few players, like <span class="colored-text">West</span> and <span class="colored-text">Jordan</span>, scored at a higher rate. A future player would have to combine playoff-appearance consistency with a high scoring average to take the record from <span class="colored-text">James</span>.</p>
            <p><small>This is step 5 in the NYT visualization</small></p>
          </div>
          <div class='step'>
            <p>Final step to - let's be honest - just waste some space</p>
          </div>
        </div>
      </div>



    </div>

    <script src="01-chart.js"></script>
    <script src="02-chart.js"></script>
    <script src="03-chart.js"></script>
    <!-- <script src="04-chart.js"></script> -->
    <script src="scrollytelling.js"></script>

   </body>
</html>